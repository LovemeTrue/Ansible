name: Pull from Server via HTTPS

on:
  schedule:
    - cron: '*/450 * * * *'
  workflow_dispatch:

jobs:
  pull-from-server:
    runs-on: [self-hosted, linux, x64]

    steps:
      - name: Pull from local repo
        run: |
          git config --global --add safe.directory /home/kind/ansible-cluster
          cd /home/kind/ansible-cluster
          sudo git pull origin main || true
          sudo git add .
          sudo git commit -m "Auto-sync" || true
          sudo git push origin main
          
